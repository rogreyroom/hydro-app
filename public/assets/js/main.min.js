"use strict";"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("serviceworker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})});
"use strict";var glassCounter,theGlass=document.querySelector(".water-glass__counter--js"),addGlass=document.querySelector(".interactions__btn-add--js"),removeGlass=document.querySelector(".interactions__btn-remove--js"),waveD=document.querySelector(".wave-down--js"),waveU=document.querySelector(".wave-up--js"),chartCanvas=document.querySelector("#myChart"),ctx=document.getElementById("myChart").getContext("2d"),chartCurrent=document.querySelector(".btn__current--js"),chartNextWeek=document.querySelector(".btn__next--js"),chartPreviousWeek=document.querySelector(".btn__previous--js"),messagePanel=document.querySelector(".chart__message--js"),localStorageKey="hydro-".concat((new Date).toISOString().slice(0,10)),chartYearWeek=moment().isoWeek();
"use strict";var myStorage=function(){var e=localStorage.getItem(localStorageKey);return null!==e?theGlass.innerHTML=e:(localStorage.setItem(localStorageKey,0),theGlass.innerHTML=0)},addToGlass=function(){glassCounter++,localStorage.setItem(localStorageKey,glassCounter),theGlass.innerHTML=glassCounter,waveD.classList.toggle("wave-down--animation"),waveU.classList.toggle("wave-up--animation"),generateChart()},removeFromGlass=function(){glassCounter--,glassCounter<0&&(glassCounter=0),localStorage.setItem(localStorageKey,glassCounter),theGlass.innerHTML=glassCounter,waveD.classList.toggle("wave-down--animation"),waveU.classList.toggle("wave-up--animation"),generateChart()};glassCounter=myStorage(),addGlass.addEventListener("click",addToGlass),removeGlass.addEventListener("click",removeFromGlass);
"use strict";var getData=function(e){var a=[],t=[],r=[],n={};if(null!==localStorage.length){for(var o=0;o<=localStorage.length-1;o++){var c=localStorage.key(o);if("hydro"===c.slice(0,5)){var s=c.slice(6,c.length),l=moment(s).isoWeek(),i=moment(s).format("dddd");l===e&&a.push({weekDay:i,date:s,value:localStorage.getItem(c)})}}a.sort(function(e,a){return new Date(e.date)-new Date(a.date)}),a.forEach(function(e){t.push(e.weekDay),r.push(e.value)}),n={weekNumber:e,xScale:t,yScale:r}}return n},createChart=function(e){new Chart(ctx,{type:"bar",data:{labels:e.xScale,datasets:[{label:"Week: ".concat(e.weekNumber),data:e.yScale,backgroundColor:"#3DC3F3",borderColor:"#76C1FB",borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},msgInfo=function(e){var a=document.createElement("p");a.className="chart__message-text",a.innerHTML=e,messagePanel.appendChild(a)},msgRemove=function(){null!==messagePanel.firstElementChild&&messagePanel.removeChild(messagePanel.firstElementChild)},checkWeek=function(){if(chartYearWeek<=0)return chartYearWeek=1;if(chartYearWeek>moment().isoWeek())return msgRemove(),msgInfo("No data for next week."),chartYearWeek>moment().isoWeeksInYear()&&(chartYearWeek=moment().isoWeeksInYear()),chartYearWeek;var e=getData(chartYearWeek);return chartYearWeek<moment().isoWeek()&&0===e.yScale.length?(msgRemove(),msgInfo("No data for previous week.")):msgRemove(),chartYearWeek},nextWeek=function(){chartYearWeek++,generateChart()},currentWeek=function(){chartYearWeek=moment().isoWeek(),generateChart()},previousWeek=function(){chartYearWeek--,generateChart()},generateChart=function(){var e=checkWeek(),a=getData(e);createChart(a)};generateChart(),chartCurrent.addEventListener("click",currentWeek),chartNextWeek.addEventListener("click",nextWeek),chartPreviousWeek.addEventListener("click",previousWeek);
"use strict";var feedLocalStorage=function(){for(var o=[["hydro-2019-07-01",5],["hydro-2019-07-02",3],["hydro-2019-07-03",8],["hydro-2019-07-04",2],["hydro-2019-07-05",7],["hydro-2019-07-06",4],["hydro-2019-07-07",1],["hydro-2019-07-08",5],["hydro-2019-07-09",3],["hydro-2019-07-10",8],["hydro-2019-07-11",2],["hydro-2019-07-12",7],["hydro-2019-07-13",4],["hydro-2019-07-14",1],["hydro-2019-07-15",5],["hydro-2019-07-16",3],["hydro-2019-07-17",8],["hydro-2019-07-18",2],["hydro-2019-07-19",7],["hydro-2019-07-20",4],["hydro-2019-07-21",1]],r=0;r<o.length;r++)localStorage.setItem(o[r][0],o[r][1])};feedLocalStorage();
"use strict";
//# sourceMappingURL=maps/main.min.js.map
